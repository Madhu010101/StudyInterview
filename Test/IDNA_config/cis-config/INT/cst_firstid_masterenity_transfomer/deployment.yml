spec:
  replicas: 1
  template:
    spec:
      volumes:
        - name: app-config
          configMap:
            name: opm-firstidmasterentity-transformer-configmap
        - name: krb5-config
          configMap:
            name: krb5-config
        - name: kafka-jaas
          configMap:
            name: opm-firstidmasterentity-kafka-jaas
        - name: keytab
          secret:
            secretName: opm-firstidmasterentity-int-keytab
        - name: keystore
          secret:
            secretName: opm-firstidmasterentity-non-prod-keystore
        - name: truststore
          secret:
            secretName: opm-firstidmasterentity-non-prod-truststore
        - name: bo-schema
          configMap:
            name: opm-firstidmasterentity-schema
        - name: logback
          configMap:
            name: logback
        - configMap:
            defaultMode: 420
            name: opm-firstidmasterentity-transform-template
          name: opm-firstidmasterentity-transform-template
      containers:
        -
          env:
            - name: TZ
              value: Africa/Johannesburg
            - name: JAVA_OPTIONS
              value: >-
                -Djava.security.krb5.conf=/etc/krb5.conf
                -Djava.security.auth.login.config=/deployments/etc/kafka.jaas
                -Djavax.net.ssl.keyStoreType=jks
                -Djavax.net.ssl.keyStore=/deployments/etc/keystore.jks
                -Djavax.net.ssl.keyStorePassword=123123
                -Djavax.net.ssl.trustStoreType=jks
                -Djavax.net.ssl.trustStore=/deployments/etc/truststore.jks
                -Djavax.net.ssl.trustStorePassword=123123
                -DJAEGER_ENDPOINT=http://jaeger-collector.istio-system.svc.cluster.local:14268/api/traces
          resources:
            limits:
              cpu: '1'
              memory: 512Mi
            requests:
              cpu: 1m
              memory: 256Mi
          livenessProbe:
            httpGet:
              path: /actuator/health
              port: 8080
            initialDelaySeconds: 300
          readinessProbe:
            httpGet:
              path: /actuator/health
              port: 8080
            initialDelaySeconds: 300
          volumeMounts:
            - name: app-config
              mountPath: /deployments/etc/properties.cfg
              subPath: properties.cfg
            - name: krb5-config
              mountPath: /etc/krb5.conf
              subPath: krb5.conf
            - mountPath: /deployments/etc/transform.ftl
              name: opm-firstidmasterentity-transform-template
              subPath: transform.ftl
            - name: kafka-jaas
              mountPath: /deployments/etc/kafka.jaas
              subPath: kafka.jaas
            - name: keytab
              mountPath: /deployments/etc/SVC_PM_OPM1_uat.keytab
              subPath: SVC_PM_OPM1_uat.keytab
              readOnly: true
            - name: keystore
              mountPath: /deployments/etc/keystore.jks
              subPath: keystore.jks
              readOnly: true
            - name: truststore
              mountPath: /deployments/etc/truststore.jks
              subPath: truststore.jks
              readOnly: true
            - name: bo-schema
              mountPath: /deployments/etc/FirstIdMasterEntityBusinessObject.avsc
              subPath: FirstIdMasterEntityBusinessObject.avsc
              readOnly: true
            - mountPath: /deployments/etc/logback.xml
              name: logback
              subPath: logback.xml
      dnsPolicy: ClusterFirst
      hostAliases:
        - hostnames:
            - dna-r1eehskaf01.fnb.co.za
          ip: 172.16.35.66
        - hostnames:
            - dna-r1eehskaf02.fnb.co.za
          ip: 172.16.35.67
        - hostnames:
            - dna-r1eehskaf03.fnb.co.za
          ip: 172.16.35.64
        - hostnames:
            - dna-r1eehsdoc01.fnb.co.za
          ip: 172.16.35.96
        - hostnames:
            - dna-r1eehcskaf01.fnb.co.za
          ip: 172.16.35.109
        - hostnames:
            - dna-r1eehcskaf02.fnb.co.za
          ip: 172.16.35.110
        - hostnames:
            - dna-r1eehcskaf03.fnb.co.za
          ip: 172.16.35.111
        - hostnames:
            - dna-r1eehcsamb01.fnb.co.za
          ip: 172.16.35.106