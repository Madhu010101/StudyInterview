spec:
  replicas: 1
  template:
    spec:
      volumes:
        - name: idna-config
          configMap:
            defaultMode: 420
            name: cst-regulatory-transformer-configmap
        - name: regulatory-schema-config
          configMap:
            defaultMode: 420
            name: cst-regulatory-schema-configmap
        - name: graylog-config
          configMap:
            defaultMode: 420
            name: graylog-configmap
        - name: krb5-config
          configMap:
            name: krb5-config
        - name: kafka-jaas-regulatory
          configMap:
            name: kafka-jaas-regulatory
        - name: cst-dmg-int-keytab
          secret:
            secretName: svc-cus-cache-int-keytab
        - name: keystore
          secret:
            secretName: keystore-reg-secret
        - name: truststore
          secret:
            secretName: truststore-reg-secret
      containers:
        -
          env:
            - name: TZ
              value: Africa/Johannesburg
            - name: JAVA_OPTS
              value: >-
                -Djava.security.krb5.conf=/etc/krb5.conf 
                -Djava.security.auth.login.config=/deployments/karaf/etc/kafka.jaas
                -Djavax.net.ssl.keyStore=/etc/keystore.jks
                -Djavax.net.ssl.keyStorePassword=7P5vuX592!$7
                -Djavax.net.ssl.trustStore=/etc/truststore.jks
                -Djavax.net.ssl.trustStorePassword=7P5vuX592!$7
          ports:
            - containerPort: 9090
              name: schemareg
              protocol: TCP
          volumeMounts:
          - name: idna-config
            mountPath: /deployments/karaf/etc/properties.cfg
            subPath: properties.cfg
          - mountPath: /etc/krb5.conf
            name: krb5-config
            subPath: krb5.conf
          - name: kafka-jaas-regulatory
            mountPath: /deployments/karaf/etc/kafka.jaas
            subPath: kafka.jaas
          - mountPath: /deployments/karaf/etc/SVC_CST_CusCache_uat.keytab
            name: cst-dmg-int-keytab
            subPath: SVC_CST_CusCache_uat.keytab
            readOnly: true
          - name: regulatory-schema-config
            mountPath: /deployments/karaf/etc/RegulatoryBusinessObject.avsc
            subPath: RegulatoryBusinessObject.avsc
          - name: graylog-config
            mountPath: /deployments/karaf/etc/org.ops4j.pax.logging.cfg
            subPath: org.ops4j.pax.logging.cfg
          - mountPath: /etc/keystore.jks
            name: keystore
            subPath: keystore.jks
          - mountPath: /etc/truststore.jks
            name: truststore
            subPath: truststore.jks
      dnsPolicy: ClusterFirst
      hostAliases:
        - hostnames:
            - dna-r1eehskaf01.fnb.co.za
          ip: 172.16.35.66
        - hostnames:
            - dna-r1eehskaf02.fnb.co.za
          ip: 172.16.35.67
        - hostnames:
            - dna-r1eehskaf03.fnb.co.za
          ip: 172.16.35.64
        - hostnames:
            - dna-r1eehsdoc01.fnb.co.za
          ip: 172.16.35.96
        - hostnames:
            - dna-r1eehcskaf01.fnb.co.za
          ip: 172.16.35.109
        - hostnames:
            - dna-r1eehcskaf02.fnb.co.za
          ip: 172.16.35.110
        - hostnames:
            - dna-r1eehcskaf03.fnb.co.za
          ip: 172.16.35.111
        - hostnames:
            - dna-r1eehcsamb01.fnb.co.za
          ip: 172.16.35.106